const iconsData = [
  {
    url: "./assets/img/icons/htmlIcon.svg",
    alt: "html ícone",
    bgColor: "#F1662A",
    textColor: "#FFF",
  },
  {
    url: "./assets/img/icons/cssIcon.svg",
    alt: "css ícone",
    bgColor: "#33A9DC",
    textColor: "#FFF",
  },
  {
    url: "./assets/img/icons/jsIcon.svg",
    alt: "java script ícone",
    bgColor: "#000000",
    textColor: "#F7DF1E",
  },
  {
    url: "./assets/img/icons/gitIcon.svg",
    alt: "git ícone",
    bgColor: "#E44C30",
    textColor: "#000",
  },
  {
    url: "./assets/img/icons/githubIcon.svg",
    alt: "github ícone",
    bgColor: "#fff",
    textColor: "#000",
  },
  {
    url: "./assets/img/icons/bootstrapIcon.svg",
    alt: "bootstrap ícone",
    bgColor: "#7E13F8",
    textColor: "#FFF",
  },
  {
    url: "./assets/img/icons/sassIcon.svg",
    alt: "sass ícone",
    bgColor: "#FFF",
    textColor: "#CD6799",
  },
  {
    url: "./assets/img/icons/styledIcon.svg",
    alt: "styled ícone",
    bgColor: "#FF6196",
    textColor: "#FFF",
  },
  {
    url: "./assets/img/icons/tsIcon.svg",
    alt: "type script ícone",
    bgColor: "#FFF",
    textColor: "#3178C6",
  },
  {
    url: "./assets/img/icons/reactIcon.svg",
    alt: "react ícone",
    bgColor: "#00D8FF",
    textColor: "#272626",
  },
  {
    url: "./assets/img/icons/firebaseIcon.svg",
    alt: "firebase ícone",
    bgColor: "#FCCA3F",
    textColor: "#272626",
  },
  {
    url: "./assets/img/icons/figmaIcon.svg",
    alt: "figma ícone",
    bgColor: "#0ACF83",
    textColor: "#272626",
  },
  {
    url: "./assets/img/icons/databaseIcon.svg",
    alt: "databases ícone",
    bgColor: "#FFF",
    textColor: "#000000",
  },
  {
    url: "./assets/img/icons/vscodeIcon.svg",
    alt: "vs code ícone",
    bgColor: "#0065A9",
    textColor: "#272626",
  },
  {
    url: "./assets/img/icons/nextIcon.svg",
    alt: "nextJS ícone",
    bgColor: "#272626",
    textColor: "#FFF",
  },
  {
    url: "./assets/img/icons/authIcon.svg",
    alt: "auth ícone",
    bgColor: "#FFF",
    textColor: "#F12A2A",
  },
  {
    url: "./assets/img/icons/nodeIcon.svg",
    alt: "node ícone",
    bgColor: "#000000",
    textColor: "#83CD29",
  },
  {
    url: "./assets/img/icons/apiIcon.svg",
    alt: "APIs ícone",
    bgColor: "#33A9DC",
    textColor: "#FFF",
  },
  {
    url: "./assets/img/icons/jestIcon.svg",
    alt: "Jest",
    bgColor: "#FFF",
    textColor: "#9A405B",
  },
  {
    url: "./assets/img/icons/cmsIcon.svg",
    alt: "Jest",
    bgColor: "#FFF",
    textColor: "#7D0BFF",
  },
];
const textData = [
  {
    title: "HTML",
    conhecimento: "Avançado",
    texto:
      "Possuo conhecimento avançado na utilização <b>HTML</b> focando sempre na implantação de uma correta estrutura semântica com as tags modernas do <b>HTML 5</b>, em conjunto a isso tenho conhecimento básico em <b>EJS</b> e avançado em <b>JSX / TSX</b> algo essencial para o <b>React</b>",
  },
  {
    title: "CSS",
    conhecimento: "Avançado",
    texto:
      "O <b>CSS</b> é uma das minhas ferramentas preferidas independentemente de sua implantação, possuo conhecimento avançado em sua utilização tanto em seletores,  <b>box-model</b>, animações, transições e em  propriedades fundamentais como o <b>Flex</b> e o <b>Grid</b> ",
  },
  {
    title: "JavaScript",
    conhecimento: "Avançado",
    texto:
      "Desde a primeira vez que utilizei tenho o <b>JS</b> como minha linguagem de programação favorita, possuo conhecimento avançado em diversos de seus aspectos, seja em seus paradigmas, com funções construtoras ou classes, <b>AJAX</b> com fetch ou axios, métodos nativos, consumo de APIs, utilizando tipagem com o superset <b>TS</b>, e principalmente em sua utilização com o React ",
  },
  {
    title: "Git",
    conhecimento: "Intermediário - Avançado",
    texto:
      "O <b>Git</b> se apresenta como uma das principais ferramentas para um desenvolvedor, possuo conhecimento em seus processos para <b>controle de versão</b>, para realização de clonagem, pull, push, merge, etc.",
  },
  {
    title: "Github",
    conhecimento: "Intermediário - Avançado",
    texto:
      "O <b>Github</b> cada vez mais se torna algo essencial por complementar a utilização do <b>Git</b>, possuo conhecimento em sua utilização como desenvolvedor, para manutenção de repositórios ou mesmo funcionalidades relacionadas a utilização do seu provider",
  },
  {
    title: "Bootstrap",
    conhecimento: "Intermediário",
    texto:
      "Uma das primeiras ferramentas que aprendi foi o <b>Bootstrap</b> para a criação de layouts concisos e responsivos de maneira mais rápida, possuo conhecimento na implementação do seu sistema de <b>Grid</b> com rows e columns ",
  },
  {
    title: "SASS",
    conhecimento: "Avançado",
    texto:
      "O <b>Sass</b> foi o primeiro pré-processador de <b>CSS</b> que aprendi, sendo uma das ferramentas que mais causam impacto na eficiência de criação de um projeto tanto no modelo <b>.sass</b> ou .<b>scss</b>, possuo conhecimento avançado em sua sintaxe",
  },
  {
    title: "Styled Components",
    conhecimento: "Avançado",
    texto:
      "Possuo alto domínio na utilização do <b>Styled-Components</b> muito disso devido ao ambiente <b>React</b>, é possível observar em meus projetos o sistema de temas e de estilo global do <b>Styled</b> assim como sua implementação em um ambiente com <b>TypeScript</b>",
  },
  {
    title: "TypeScript",
    conhecimento: "Intermediário - Avançado",
    texto:
      "O <b>TS</b> é uma opção que traz diversas funcionalidades ao <b>JS</b> e um aperfeiçoamento  na segurança de escrita do código, possuo conhecimento avançado em sua implantação principalmente em ambiente <b>React</b>",
  },
  {
    title: "ReactJS",
    conhecimento: "Avançado",
    texto:
      "O <b>React</b> após o <b>JS</b> vanilla é o core dos meus estudos, possuo conhecimento avançado na sua implantação moderna em forma de <b>Hooks</b>, em seu sistema de <b>renderização e re-renderização</b>, e em todo seu ecossistema para estilização, criação de rotas, consumo de APIs, etc.",
  },
  {
    title: "Firebase",
    conhecimento: "Intermediário",
    texto:
      "Dei destaque ao <b>Firebase</b> pois é uma ferramenta em alta atualmente. Possuo conhecimento em sua implantação com <b>TS</b>, em ambiente React, usando as funcionalidades relacionadas ao <b>Store</b> ou relacionadas a <b>autenticação</b> ",
  },
  {
    title: "Figma",
    conhecimento: "Intermediário - Avançado",
    texto:
      "O <b>Figma</b> me foi apresentado na faculdade e atualmente é uma das principais ferramentas que utilizo tanto na idealização de projetos quanto para criação de <b>SVGs</b>, e em ambiente acadêmico já realizei criações de interfaces seguindo diretrizes de <b>UI / UX</b> com o <b>Figma</b>",
  },
  {
    title: "Databases",
    conhecimento: "Intermediário",
    texto:
      "Possuo conhecimento no ciclo completo de Databases <b>noSQL</b> em especial o <b>faunaDB, Firebase, MongoDB,</b> e conhecimento avançado no consumo de dados vindos de databases em especial em ambiente <b>React</b>",
  },
  {
    title: "Visual Studio Code",
    conhecimento: "Avançado",
    texto:
      "O <b>VS code</b> dentre  todas as IDEs que utilizei foi a que mais senti facilidade tanto para personalização quanto para trabalhar em si, possuo conhecimentos avançados em sua utilização",
  },
  {
    title: "NextJS",
    conhecimento: "Intermediário - Avançado",
    texto:
      "Assim como o <b>React</b> evolui a utilização do <b>JS</b> o <b>Next</b> aprimora em muito a utilização do <b>React</b>, embora tenha pouca experiência na utilização do <b>Next</b> detenho conhecimento em suas principais ferramentas, como o sistema de pages assim como o <b>SSR</b> (Server side Rendering) e o <b>SSG</b> (Static site generation), que evoluem em muito a forma de trabalho com React",
  },
  {
    title: "Auth",
    conhecimento: "Intermediário",
    texto:
      "Para poder desenvolver projetos completos solo umas das principais ferramentas são as relacionadas a autenticação, sei utilizar ferramentas como o <b>auth0</b>, <b>NextAuth</b>, ou mesmo o sistema de autenticação do <b>Firebase</b>  e seus respectivos provedores, assim como trabalhar com tokens e sessões",
  },
  {
    title: "NodeJS",
    conhecimento: "Básico",
    texto:
      "Ao se estudar <b>JS</b> eventualmente nos deparamos com o <b>Node</b>, particularmente estudei um pouco sobre sua utilização com o <b>Express</b> para trabalhar com requisições, middlewares e criação de Apis porém ainda não foi uma área de total enfoque meu, assim como também estudei sobre todo o processo de análise de requisitos especialmente na faculdade ",
  },
  {
    title: "Consumo de APIs",
    conhecimento: "Avançado",
    texto:
      "O consumo de <b>APIs</b> é uma das principais tarefas de um sistema front-end, é algo muito explorado em meus projetos onde busco sempre aprimorar não só a forma de requisição mas como também de exibição dos dados, tenho experiências com APIs próprias criadas com CMSs, APIs de pagamento,  APIs de databases, etc.",
  },
  {
    title: "Testes com Jest",
    conhecimento: "Básico",
    texto:
      "Teste se mostram como algo essencial para qualquer projeto, atualmente já possuo conhecimento básico com a utilização do <b>Jest</b> e planejo aprimorar tal conhecimento ",
  },
  {
    title: "CMS",
    conhecimento: "Básico - Intermediário",
    texto:
      "Recentemente eu fui apresentado a <b>sistemas para gestão de conteúdos</b> como o <b>Prismic</b> ou o <b>Strapi</b>, particularmente tenho mais familiaridade  com o <b>Strapi</b> já que o slice machine do <b>Prismic</b> apresenta certa Complexidade",
  },
];
const projectsData = [
  {
    title: "Subscribe App",
    imgUrl: "./assets/img/projects/subscribe.png",
    appUrl: "https://best-article.vercel.app/",
    githubUrl: "https://github.com/NikisGabriel/Subscribe-App",
    color: "#EBA418",
  },
  {
    title: "Drag-Drop",
    imgUrl: "./assets/img/projects/drag.png",
    appUrl: "https://reliable-tarsier-9ef7d1.netlify.app/",
    githubUrl: "https://github.com/NikisGabriel/Drag-Drop-JS",
    color: "#C5283D",
  },
  {
    title: "Cart",
    imgUrl: "./assets/img/projects/cart.png",
    appUrl: "https://legendary-semolina-3f9fff.netlify.app/",
    githubUrl: "https://github.com/NikisGabriel/CartApp",
    color: "#4C255C",
  },
  {
    title: "Favorite",
    imgUrl: "./assets/img/projects/favorite.png",
    appUrl: "https://github.com/NikisGabriel/Favorite",
    githubUrl: "https://favorite-five.vercel.app/",
    color: "#63C8EE",
  },
  {
    title: "Poke Pagination",
    imgUrl: "./assets/img/projects/poke.png",
    appUrl: "https://heroic-dieffenbachia-76f10f.netlify.app/",
    githubUrl: "https://github.com/NikisGabriel/React-Poke-Pagination",
    color: "#164461",
  },
  {
    title: "Hero Api",
    imgUrl: "./assets/img/projects/hero.png",
    appUrl: "https://hero-api-lilac.vercel.app/",
    githubUrl: "https://github.com/NikisGabriel/Hero-Api",
    color: "#CC0201",
  },
  {
    title: "React E-commerce",
    imgUrl: "./assets/img/projects/real.png",
    appUrl: "https://euphonious-youtiao-a6b4e3.netlify.app/",
    githubUrl: "https://github.com/NikisGabriel/React-e-commerce",
    color: "#626767",
  },
];

function cursor() {
  const cursor = document.querySelector(".cursor");
  const cursorInner = document.querySelector(".cursor2");

  document.addEventListener("mousemove", function (e) {
    var x = e.clientX;
    var y = e.clientY;
    cursor.style.transform = `translate3d(calc(${e.clientX}px - 50%), calc(${e.clientY}px - 50%), 0)`;
  });
  document.addEventListener("mousemove", function (e) {
    var x = e.clientX;
    var y = e.clientY;
    cursorInner.style.left = x + "px";
    cursorInner.style.top = y + "px";
  });
  document.addEventListener("mouseover", function (e) {
    if (
      (e.target.tagName === "A" ||
        e.target.classList.contains("iconKnowledge") ||
        e.target.tagName === "BUTTON") &&
      !e.target.classList.contains("disable")
    ) {
      cursor.style.borderColor = "#c5283d";
    }
  });
  document.addEventListener("mouseout", function (e) {
    if (
      e.target.tagName === "A" ||
      e.target.classList.contains("iconKnowledge") ||
      e.target.tagName === "BUTTON"
    ) {
      cursor.style.borderColor = "black";
    }
  });
  document.addEventListener("click", function () {
    cursorInner.style.width = "20px";
    cursorInner.style.height = "20px";
    setTimeout(() => {
      cursorInner.style.width = "15px";
      cursorInner.style.height = "15px";
    }, 200);
  });
}
cursor();

function logo() {
  const logoContainer = document.querySelector(".logoContainer");
  document.addEventListener("mousemove", function (e) {
    logoContainer.childNodes.forEach((element) => {
      if (element.tagName === "IMG") {
        const x = e.clientX;
        const y = e.clientY;
        const SPEED = Number(element.getAttribute("data-move"));
        moveLogo(element, SPEED, x, y);
      }
    });
  });
}
const moveLogo = (element, SPEED, x, y) => {
  element.style.transform = `translate(${(SPEED * x) / 100}px, ${
    (SPEED * y) / 100
  }px)`;
};
logo();

const changeChild = (parent, add, remove) => {
  parent.appendChild(add);
  if (remove) parent.removeChild(remove);
};
const createIconElement = (url, alt) => {
  const IMG = document.createElement("img");
  IMG.src = url;
  IMG.alt = alt;
  return IMG;
};
//importação geral
const chosenItem = document.querySelector(".chosenItem");
const indicator = document.querySelector(".support");
let interval1;
let interval2;

function changeIcon() {
  let index = 0;
  //troca de icons
  interval1 = setInterval(() => {
    if (index === iconsData.length) index = 0;

    const url = iconsData[index].url;
    const alt = iconsData[index].alt;
    const newIcon = createIconElement(url, alt);
    newIcon.classList.add("iconKnowledge");
    const previousIcon = chosenItem.lastElementChild;

    changeChild(chosenItem, newIcon, previousIcon);

    changePresentation();
    index++;
    clearInterval(interval2);
    loading();
  }, 100_00 /* 10 segundos */);

  //loading bar
  const loading = () => {
    let percentage = 100;
    interval2 = setInterval(() => {
      if (percentage === 0) percentage = 100;
      percentage--;
      loadingBar(percentage);
    }, 100);
  };
  const loadingBar = (percentage) => {
    indicator.style.width = `${percentage}%`;
  };
  loading();
}
changeIcon();

function choose() {
  document.addEventListener("click", (e) => {
    const target = e.target;
    if (target.classList.contains("iconKnowledge")) {
      const newIcon = createClone(target);
      const previousIcon = chosenItem.lastElementChild;

      changeChild(chosenItem, newIcon, previousIcon);
      changePresentation();
      pauseInterval();
    }
  });
  const createClone = (element) => {
    const newElement = element.cloneNode(true);
    newElement.style.opacity = "1";
    return newElement;
  };
}
choose();

function pauseInterval() {
  clearInterval(interval1);
  clearInterval(interval2);
  indicator.style.width = "100%";
}

function addIcons() {
  const toolsContainer = document.querySelector(".toolsContainer");
  iconsData.forEach((icon) => {
    const IMG = createIconElement(icon.url, icon.alt);
    IMG.classList.add("iconKnowledge");

    toolsContainer.appendChild(IMG);
  });
}
addIcons();

function changePresentation() {
  const currentIcon = document.querySelector(".iconKnowledge");
  let currentIconObj;

  const presentationContainer = document.querySelector(
    ".presentationContainer"
  );
  const presentation = document.querySelector(".presentation");
  const card = document.querySelector(".card");

  let presentationIndex;
  //função para definir o correto index para o texto apresentado
  iconsData.forEach((icon, index) => {
    const currentIconUrl =
      currentIcon.src.split("/")[currentIcon.src.split("/").length - 1];
    const iconUrl = icon.url.split("/")[icon.url.split("/").length - 1];
    if (currentIconUrl === iconUrl) {
      currentIconObj = icon;
      presentationIndex = index;
    }
  });
  //recuperando o objeto correto
  const currentText = textData[presentationIndex];
  //modificando os texts
  card.firstElementChild.innerHTML = currentText.title;
  presentation.childNodes[5].innerHTML = currentText.conhecimento;
  presentation.childNodes[9].innerHTML = currentText.texto;
  //modificando estilo
  presentationContainer.style.backgroundColor = currentIconObj.bgColor;
  presentation.style.color = currentIconObj.textColor;
}
changePresentation();

function slideShow() {
  const carousel = document.querySelector(".carouselContainer");
  const carouselDots = document.querySelector(".carouselDots");

  const projectLinkApp = document.querySelector(".projectLinkApp");
  const projectLinkGithub = document.querySelector(".projectLinkGithub");

  const projectLinkImg = document.querySelector(".projectLinkImg");

  let index = 0;
  let currentInterval;

  selectProject(index);

  //slide automático
  const slideInterval = () =>
    (currentInterval = setTimeout(() => alterIndex(1), 5000));
  slideInterval();

  carousel.addEventListener("click", (e) => {
    const target = e.target;

    if (
      target.classList.contains("leftArrow") ||
      target.classList.contains("rightArrow")
    ) {
      target.classList.contains("leftArrow") ? alterIndex(-1) : alterIndex(1);
    }
  });
  function alterIndex(value) {
    index = index + value;

    if (index < 0) index = projectsData.length - 1;
    if (index > projectsData.length - 1) index = 0;

    selectProject(index);
    dotSelected(index);
    clearTimeout(currentInterval);
    slideInterval();
  }
  function selectProject(index) {
    //recuperando o objeto referente ao index
    const project = projectsData[index];
    //trocando utl dos links
    projectLinkApp.href = project.appUrl;
    projectLinkGithub.href = project.githubUrl;

    projectLinkImg.href = project.appUrl;

    projectLinkApp.innerHTML = project.title;
    changeBgColor(projectLinkApp, project.color);

    const newProjectImg = createIconElement(project.imgUrl, project.title);
    changeChild(
      projectLinkImg,
      newProjectImg,
      projectLinkImg.firstElementChild
    );
  }
  function changeBgColor(element, color) {
    element.style.backgroundColor = color;
  }

  function setDots() {
    for (let i = 0; i < projectsData.length; i++) {
      const span = document.createElement("span");
      carouselDots.appendChild(span);
    }
  }

  setDots();
  dotSelected(index);
  function dotSelected(index) {
    carouselDots.childNodes.forEach((element, i) => {
      if (element.classList.contains("selected"))
        element.classList.remove("selected");
      if (i === index) {
        element.classList.add("selected");
      }
    });
  }
}
slideShow();

function smoothScroll() {
  document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
    anchor.addEventListener("click", function (e) {
      e.preventDefault();

      document.querySelector(this.getAttribute("href")).scrollIntoView({
        behavior: "smooth",
      });
    });
  });
}
smoothScroll();

window.addEventListener("scroll", itemsApear);
function itemsApear() {
  const windowHeight = window.innerHeight;
  const elementVisible = 150;

  const reveals = document.querySelectorAll(".reveal");
  reveals.forEach((element) => {
    const elementTop = element.getBoundingClientRect().top;

    if (elementTop < windowHeight - elementVisible) {
      element.classList.add("active");
    } else {
      element.classList.remove("active");
    }
  });
}
itemsApear();
